<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>read-a-book on ubiks232&#39;s blog</title>
    <link>https://ubiks232.github.io/tags/read-a-book/</link>
    <description>Recent content in read-a-book on ubiks232&#39;s blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <lastBuildDate>Tue, 06 Jan 2026 20:59:11 +0800</lastBuildDate><atom:link href="https://ubiks232.github.io/tags/read-a-book/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ULUPA-2.5-who</title>
      <link>https://ubiks232.github.io/posts/ulupa-2.5-who/</link>
      <pubDate>Tue, 06 Jan 2026 20:59:11 +0800</pubDate>
      
      <guid>https://ubiks232.github.io/posts/ulupa-2.5-who/</guid>
      <description>Understanding Linux/Unix Programming A Guide 2 Theory And Practice
who是怎么工作的? 是怎么实现的? 使用man who查询得到&amp;quot;&amp;hellip;If FILE is not specified, use /var/run/utmp. /var/log/wtmp as FILE is common&amp;hellip;&amp;quot;, 因此应该寻找一个读取utmp/wtmp文件的方法, 此时需要知道这两个个文件的数据结构.
使用man -k utmp, 查找与utmp相关的条目, 在我的系统上找到utmp (5) - login records的记录, 因此使用man 5 utmp查询, 得到utmp文件中的数据结构, 即以结构体utmpx或utmp形式组织的数据结构.
能不能自己写一个who? 简单的实现方式, 就是使用read读取文件, 然后使用格式化输出打印到终端, 这个过程需要使用只读的方式打开utmp文件, 因此还要使用到open和close, 格式化输出过程中, 登陆时间显示的是描述, 使用ctime将其转化为日期加时间的表示方式.
最终效果如下:
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74  #include &amp;lt;stdio.</description>
    </item>
    
  </channel>
</rss>
